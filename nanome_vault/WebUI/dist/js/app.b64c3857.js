(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],p=0,f=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0117":function(t,e,n){"use strict";var r=n("812f"),o=n.n(r);o.a},1140:function(t,e,n){"use strict";var r=n("fe45"),o=n.n(r);o.a},1146:function(t,e,n){},"1e7f":function(t,e,n){"use strict";var r=n("1146"),o=n.n(r);o.a},"21bb":function(t,e,n){"use strict";var r=n("7a98"),o=n.n(r);o.a},"30db":function(t,e,n){"use strict";var r=n("caf9"),o=n.n(r);o.a},5258:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("def6");var r=n("2b0e"),o=n("ecee"),a=n("ad3d"),i=n("c074");r["a"].component("fa-icon",a["a"]),r["a"].component("fa-layers",a["b"]),r["a"].component("fa-text",a["c"]),o["c"].add({faAngleRight:i["a"],faArrowUp:i["b"],faBars:i["c"],faCloudUploadAlt:i["d"],faFile:i["e"],faFileDownload:i["f"],faFolder:i["g"],faFolderPlus:i["h"],faLock:i["i"],faLockOpen:i["j"],faPen:i["k"],faPlus:i["l"],faSadTear:i["m"],faSearch:i["n"],faSyncAlt:i["o"],faTh:i["p"],faTrash:i["q"]});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-screen h-screen",attrs:{id:"app"}},[n("router-view")],1)},c=[],u=(n("5c0b"),n("2877")),l={},p=Object(u["a"])(l,s,c,!1,null,null,null),f=p.exports,d=(n("a481"),n("8c4f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home min-h-full container m-auto bg-white flex flex-col"},[t._m(0),n("h1",{staticClass:"font-bold"},[t._v("Upload Files to Nanome")]),t.authEnabled&&!t.token?n("div",[t._m(1),n("button",{staticClass:"text-3xl btn primary rounded-lg",on:{click:function(e){return t.$modal.login()}}},[n("div",{staticClass:"my-2 mx-8"},[n("fa-icon",{staticClass:"mr-2",attrs:{icon:"lock"}}),t._v("\n        Access Vault\n      ")],1)])]):[n("p",{staticClass:"text-lg mb-8"},[t._v("\n      Drag and drop or click the new file button to upload files."),n("br"),t._v("\n      Supports "),n("b",[t._v(t._s(t._f("extensions")(t.extensions.supported))+",")]),t.showMore?t._e():n("button",{staticClass:"ml-2 text-blue-500",on:{click:function(e){t.showMore=!0}}},[t._v("\n        show more...\n      ")]),n("br"),t.showMore?[n("b",[t._v(t._s(t._f("extensions")(t.extensions.extras)))]),n("br")]:t._e(),t._v("\n      Converts to PDF "),n("b",[t._v(t._s(t._f("extensions")(t.extensions.converted)))])],2),n("div",{staticClass:"text-left"},[n("div",{staticClass:"text-lg px-4 py-2 ml-4 rounded bg-gray-200 inline"},[t.name?[t._v("\n          Welcome "),n("b",[t._v(t._s(t.name)+"!")]),t._v("Â \n          "),n("a",{staticClass:"link text-red-500",on:{click:function(e){return t.$store.dispatch("logout")}}},[t._v("log out")])]:[t._v("\n          Welcome!\n          "),n("a",{staticClass:"link text-blue-500",on:{click:function(e){return t.$modal.login()}}},[t._v("log in")])]],2)]),n("file-explorer")]],2)},m=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"mb-4 mx-auto text-white"},[r("div",{staticClass:"inline-flex items-baseline text-5xl"},[r("img",{staticClass:"mr-4",attrs:{src:n("cf05")}}),t._v(" Vault\n    ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-lg mt-4 mb-8"},[t._v("\n      Access shared content from the community "),n("br"),t._v("or share your own with\n      people in your Nanome sessions.\n    ")])}],v=n("2f62"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-explorer flex flex-col m-4 bg-gray-100 rounded flex-grow"},[n("div",{staticClass:"mx-4 mt-4 border-b"},[n("toolbar",{on:{"display-mode":function(e){t.displayMode=e},"new-folder":t.newFolder,"show-upload":t.showDropzone}}),n("breadcrumbs",{attrs:{path:t.path}})],1),n("div",{staticClass:"flex-grow relative select-none px-4",on:{contextmenu:function(e){return e.preventDefault(),t.showContextMenu({event:e,path:t.path})}}},["grid"===t.displayMode?n("file-view-grid",{attrs:{path:t.path}}):n("file-view-list",{attrs:{path:t.path}}),n("file-dropzone",{ref:"dropzone",attrs:{path:t.path},on:{upload:t.refresh}})],1),t.contextmenu.show?n("div",{directives:[{name:"click-out",rawName:"v-click-out",value:t.hideContextMenu,expression:"hideContextMenu"}],ref:"contextmenu",staticClass:"contextmenu",style:{top:t.contextmenu.top,left:t.contextmenu.left},on:{click:t.hideContextMenu}},[n("ul",[t.menuOptions.canCreate?n("li",[n("button",{staticClass:"text-gray-800",on:{click:function(e){return t.newFolder(t.contextmenu.path)}}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"folder-plus",transform:"shrink-2"}}),t._v("\n          new folder\n        ")],1)]):t._e(),t.menuOptions.isFolder?t._e():n("li",[n("button",{staticClass:"text-gray-800",on:{click:t.downloadItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"file-download",transform:"shrink-2"}}),t._v("\n          download\n        ")],1)]),t.menuOptions.canEncrypt?n("li",[n("button",{staticClass:"text-gray-800",on:{click:t.encryptFolder}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"lock",transform:"shrink-2"}}),t._v("\n          encrypt\n        ")],1)]):t.contextmenu.encrypted?n("li",[n("button",{staticClass:"text-gray-800",on:{click:t.decryptFolder}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"lock-open",transform:"shrink-2"}}),t._v("\n          decrypt\n        ")],1)]):t._e(),t.menuOptions.canModify?n("li",[n("button",{staticClass:"text-gray-800",on:{click:t.renameItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"pen",transform:"shrink-2"}}),t._v("\n          rename\n        ")],1)]):t._e(),t.menuOptions.canModify?n("li",[n("button",{staticClass:"text-red-500",on:{click:t.deleteItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"trash",transform:"shrink-2"}}),t._v("\n          delete\n        ")],1)]):t._e()])]):t._e()])},y=[],g=(n("ac6a"),n("96cf"),n("3b8d")),x=(n("6762"),n("2fdb"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("f559"),n("768b")),w=(n("7514"),n("456d"),n("8615"),n("75fc"));r["a"].use(v["a"]);var k={authEnabled:!1,token:localStorage.getItem("user-token")||null,unique:null,name:null,extensions:{supported:[],extras:[],converted:[]}},_={allExtensions:function(t){var e,n=t.extensions;return(e=[]).concat.apply(e,Object(w["a"])(Object.values(n)))}},C={AUTH_ENABLED:function(t){t.authEnabled=!0},PATCH_USER:function(t,e){Object.assign(t,e)},SET_EXTENSIONS:function(t,e){t.extensions=e}};function O(t,e){return j.apply(this,arguments)}function j(){return j=Object(g["a"])(regeneratorRuntime.mark((function t(e,n){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.success,o=n.results,!r){t.next=15;break}return a={unique:o.user.unique,name:o.user.name,token:o.token.value},e("PATCH_USER",a),localStorage.setItem("user-token",o.token.value),t.prev=5,t.next=8,N.create("/"+o.user.unique);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](5);case 12:return t.abrupt("return",!0);case 15:return localStorage.removeItem("user-token"),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[5,10]])}))),j.apply(this,arguments)}var $={getInfo:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,N.getInfo();case 3:r=t.sent,o=r.extensions,n("SET_EXTENSIONS",o);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),login:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,N.login(n);case 3:return o=t.sent,t.abrupt("return",O(r,o));case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),refresh:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,N.refresh();case 3:return r=t.sent,t.abrupt("return",O(n,r));case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,n("PATCH_USER",{token:null,name:null,unique:null}),localStorage.removeItem("user-token");case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},E=new v["a"].Store({state:k,getters:_,mutations:C,actions:$});function D(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function R(t,e){if(t){if("string"===typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S="https://api.nanome.ai/user";function F(t){return t.replace(/^\/account/,"/"+E.state.unique)}function A(t){return t.replace(/\b$/,"/")}function T(t){return L.apply(this,arguments)}function L(){return L=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},E.state.token&&!e.startsWith(S)&&(n.headers=Object.assign({},n.headers,{Authorization:"Bearer "+E.state.token})),t.next=4,fetch(e,n);case 4:return r=t.sent,t.next=7,r.json();case 7:return o=t.sent,o.code=r.status,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.key||(n.key=U.keys.get(t)),t=F(t);var r=new FormData;for(var o in r.append("command",e),n){var a=n[o];if(a instanceof Array){var i,s=D(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;r.append(o,c)}}catch(u){s.e(u)}finally{s.f()}}else a&&r.append(o,a)}return T("/files"+t,{method:"POST",body:r})}var M={},U={keys:{add:function(t,e){t=A(t),M[t]=e},get:function(t){t=A(t);var e=Object.keys(M),n=e.find((function(e){return 0==t.indexOf(e)}));return M[n]},remove:function(t){t=A(t),delete M[t]}},getInfo:function(){return T("/info")},login:function(t){var e=t.username,n=t.password,r={login:e,pass:n,source:"web:plugin-vault"};return T("".concat(S,"/login"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)})},refresh:function(){var t=E.state.token;return t?T("".concat(S,"/session"),{headers:{Authorization:"Bearer ".concat(t)}}):{}},download:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={headers:{}},r=U.keys.get(e),r&&(n.headers["Vault-Key"]=r),E.state.token&&(n.headers["Authorization"]="Bearer "+E.state.token),e=F(e),t.next=7,fetch("/files"+e,n).then((function(t){return t.blob()}));case 7:o=t.sent,a=document.createElement("a"),i=URL.createObjectURL(o),a.href=i,a.download=e.substring(e.lastIndexOf("/")+1),document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i);case 16:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),list:function(t){var e={headers:{}},n=U.keys.get(t);return n&&(e.headers["Vault-Key"]=n),t=F(t),T("/files"+t,e)},getFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={path:"",parent:"",folders:[],locked:[],files:[]},"/"!==e.slice(-1)&&(e+="/"),"/"!==e&&(r=e.slice(0,-1).lastIndexOf("/"),n.parent=e.substring(0,r)+"/"),t.next=5,U.list(e);case 5:if(o=t.sent,o.success){t.next=10;break}throw a=new Error(o.error),a.code=o.code,a;case 10:return n.path=e,n.locked_path=o.locked_path,n.locked=o.locked,n.folders=o.folders,n.files=o.files.map((function(t){var e=/^(.+?)(?:\.(\w+))?$/.exec(t),n=Object(x["a"])(e,3),r=n[0],o=n[1],a=n[2],i=void 0===a?"":a;return{full:r,name:o,ext:i}})),t.abrupt("return",n);case 16:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),upload:function(t,e){if(e&&e.length)return I(t,"upload",{files:e})},delete:function(t){return I(t,"delete")},create:function(t){return I(t,"create")},rename:function(t,e){return I(t,"rename",{name:e})},encrypt:function(t,e){return I(t,"encrypt",{key:e})},decrypt:function(t,e){return I(t,"decrypt",{key:e})},verifyKey:function(t,e){return I(t,"verify",{key:e})}},N=U,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumbs flex text-xl py-3 items-center"},[n("router-link",{staticClass:"btn rounded mr-2",attrs:{to:t.parentPath,event:t.parentPath?"click":"",tabindex:t.parentPath?"":-1,disabled:!t.parentPath,tag:"button"}},[n("fa-icon",{attrs:{icon:"arrow-up"}})],1),t._l(t.subpaths.slice(0,-1),(function(e){var r=e.name,o=e.path;return n("div",{key:o},[o?n("router-link",{staticClass:"px-3",attrs:{to:o}},[t._v(t._s(r))]):n("span",{staticClass:"px-3"},[t._v(t._s(r))]),n("fa-icon",{attrs:{icon:"angle-right"}})],1)})),n("div",{staticClass:"text-gray-600 px-3"},[t._v(t._s(t.currentName))])],2)},q=[];n("28a5");function H(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=K(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function K(t,e){if(t){if("string"===typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V,W,J={props:{path:String},computed:{subpaths:function(){var t,e=this.path.slice(0,-1).split("/"),n=[],r="",o=H(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r+=a+"/",a||(a="files"),n.push({name:a,path:r})}}catch(i){o.e(i)}finally{o.f()}return n.length>5&&n.splice(3,n.length-5,{name:"..."}),n},currentName:function(){return this.subpaths[this.subpaths.length-1].name},parentPath:function(){if("/"==this.path)return"";var t=this.path.slice(0,-1).lastIndexOf("/");return this.path.slice(0,t)+"/"}}},X=J,G=(n("e7ab"),Object(u["a"])(X,z,q,!1,null,null,null)),Y=G.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar flex text-lg items-center"},[n("div",{staticClass:"toggle relative mr-2 flex"},[n("input",{attrs:{checked:"",value:"grid",type:"radio",name:"display-mode",id:"display-mode-grid"},on:{input:function(e){return t.$emit("display-mode",e.target.value)}}}),n("label",{staticClass:"btn rounded-l",attrs:{for:"display-mode-grid",title:"grid view"}},[n("fa-icon",{attrs:{icon:"th"}})],1),n("input",{attrs:{value:"list",type:"radio",name:"display-mode",id:"display-mode-list"},on:{input:function(e){return t.$emit("display-mode",e.target.value)}}}),n("label",{staticClass:"btn rounded-r",attrs:{for:"display-mode-list",title:"list view"}},[n("fa-icon",{attrs:{icon:"bars"}})],1)]),n("button",{staticClass:"btn rounded mr-2",attrs:{title:"refresh"},on:{click:function(e){return t.$root.$emit("refresh")}}},[n("fa-icon",{attrs:{icon:"sync-alt"}}),n("span",{staticClass:"hidden ml-1 lg:inline"},[t._v(" refresh")])],1),n("button",{staticClass:"btn rounded mr-2",attrs:{title:"new folder"},on:{click:function(e){return t.$emit("new-folder")}}},[n("fa-layers",[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"plus",transform:"down-1 shrink-10"}})],1),n("span",{staticClass:"hidden ml-1 lg:inline"},[t._v(" new folder")])],1),n("button",{staticClass:"btn rounded",attrs:{title:"upload"},on:{click:function(e){return t.$emit("show-upload")}}},[n("fa-icon",{attrs:{icon:"cloud-upload-alt"}}),n("span",{staticClass:"hidden ml-1 lg:inline"},[t._v(" upload")])],1)])},Z=[],tt=(n("b751"),{}),et=Object(u["a"])(tt,Q,Z,!1,null,null,null),nt=et.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("div",{staticClass:"file-view-grid pt-4 text-lg",class:{grid:t.files.length||t.folders.length}},[t._l(t.folders,(function(e){return[t.encrypted.includes(e)?n("a",{key:e,staticClass:"cursor-default",attrs:{title:e},on:{dblclick:function(n){return t.openLocked(e)},contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e+"/",!0)}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:t.isLocked(e)?"lock":"lock-open",transform:"down-1 shrink-11"}})],1),n("div",{staticClass:"truncate"},[t._v(t._s(e))])],1):n("router-link",{key:e,staticClass:"cursor-default",attrs:{title:e,to:""+t.path+e+"/",event:"dblclick"},nativeOn:{contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e+"/")}}},[n("fa-icon",{staticClass:"icon pointer-events-none",attrs:{icon:"folder"}}),n("div",{staticClass:"truncate"},[t._v(t._s(e))])],1)]})),"/"==t.path?[t.$store.state.unique?n("router-link",{staticClass:"cursor-default",attrs:{to:"/account/",event:"dblclick"},nativeOn:{contextmenu:function(e){return e.preventDefault(),t.contextmenu(e,"account/")}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock-open",transform:"down-1 shrink-11"}})],1),n("div",[t._v("account")])],1):n("a",{on:{dblclick:function(e){return t.$modal.login()}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock",transform:"down-1 shrink-11"}})],1),n("div",[t._v("account")])],1)]:t._e(),t._l(t.files,(function(e){return n("div",{key:e.full,attrs:{title:e.full},on:{contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e.full)},dblclick:function(n){return t.$root.$emit("download",t.path+e.full)}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"file"}}),n("fa-text",{staticClass:"text-white",attrs:{transform:"down-4 shrink-12",value:e.ext.substr(0,4)}})],1),n("div",{staticClass:"truncate"},[t._v(t._s(e.name))])],1)})),t.files.length||t.folders.length?t._e():n("div",{staticClass:"text-xl py-4"},[n("fa-layers",{staticClass:"text-6xl"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"sad-tear",transform:"down-1 shrink-10"}})],1),n("br"),t._v("\n    this folder is empty\n  ")],1)],2)},ot=[],at={props:{path:String},data:function(){return{loading:!0,key_path:null,encrypted:[],folders:[],files:[]}},watch:{path:{handler:"refresh",immediate:!0},"$store.state.token":"refresh"},mounted:function(){var t=this;this.$root.$on("refresh",this.refresh),this.$once("hook:beforeDestroy",(function(){t.$root.$off("refresh",t.refresh)}))},methods:{refresh:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.beforeRefresh&&e&&this.beforeRefresh(),this.loading=!0,t.prev=2,t.next=5,N.getFolder(this.path);case 5:n=t.sent,this.key_path=n.locked_path,this.encrypted=n.locked,this.folders=n.folders,this.files=n.files,this.loading=!1,t.next=25;break;case 13:if(t.prev=13,t.t0=t["catch"](2),401!==t.t0.code){t.next=18;break}return this.$store.commit("AUTH_ENABLED"),t.abrupt("return");case 18:if(403!==t.t0.code){t.next=24;break}return t.next=21,this.unlockFolder();case 21:if(r=t.sent,!r){t.next=24;break}return t.abrupt("return",this.refresh());case 24:this.$router.push("/");case 25:case"end":return t.stop()}}),t,this,[[2,13]])})));function e(e){return t.apply(this,arguments)}return e}(),contextmenu:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.stopPropagation(),this.$root.$emit("contextmenu",{event:t,path:this.path+e,locked:this.isLocked(e),encrypted:n,key_path:this.key_path,component:this})},isLocked:function(t){t=t.replace(/\/$/,"");var e=this.loading||this.encrypted.includes(t),n=!N.keys.get(this.path+t);return e&&n},unlockFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:"",n=this.path+e,this.isLocked(e)){t.next=4;break}return t.abrupt("return",!0);case 4:return t.next=6,this.$modal.prompt({title:"Unlock Folder",body:"Attempting to view ".concat(n,"<br>Please enter key:"),password:!0});case 6:if(r=t.sent,r){t.next=9;break}return t.abrupt("return",!1);case 9:return t.next=11,N.verifyKey(n,r);case 11:if(o=t.sent,a=o.success,a){t.next=17;break}return t.next=16,this.$modal.alert({title:"Unlock Failed",body:"The provided key was incorrect"});case 16:return t.abrupt("return",!1);case 17:return N.keys.add(n,r),t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openLocked:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.unlockFolder(e);case 2:n=t.sent,n&&this.$router.push(this.path+e).catch((function(t){}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},it=at,st=Object(u["a"])(it,V,W,!1,null,null,null),ct=st.exports,ut={extends:ct},lt=ut,pt=(n("1140"),Object(u["a"])(lt,rt,ot,!1,null,null,null)),ft=pt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("div",{staticClass:"file-view-list text-lg"},[t.files.length||t.folders.length?n("ul",{staticClass:"w-full"},[t._l(t.folders,(function(e){return[n("li",{key:e,staticClass:"p-2 flex items-center"},[n("fa-icon",{staticClass:"text-2xl w-8 cursor-pointer text-gray-500 hover:text-black",class:{expanded:t.expanded[e]},attrs:{icon:"angle-right","fixed-width":""},on:{click:function(n){t.toggleFolder(e,t.isLocked(e))}}}),t.encrypted.includes(e)?n("a",{staticClass:"file cursor-default",attrs:{title:e},on:{dblclick:function(n){return t.openLocked(e)},contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e+"/",!0)}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:t.isLocked(e)?"lock":"lock-open",transform:"down-1 shrink-11"}})],1),n("div",{staticClass:"truncate"},[t._v(t._s(e))])],1):n("router-link",{staticClass:"file cursor-default",attrs:{title:e,to:""+t.path+e+"/",event:"dblclick"},nativeOn:{contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e+"/")}}},[n("fa-icon",{staticClass:"icon mr-2",attrs:{icon:"folder"}}),n("div",{staticClass:"truncate"},[t._v(t._s(e))])],1)],1),t.expanded[e]?n("li",{key:e+"-expanded",staticClass:"pl-8"},[n("file-view-list",{attrs:{path:""+t.path+e+"/",nested:""}})],1):t._e()]})),"/"==t.path?[n("li",{staticClass:"p-2 flex items-center"},[n("fa-icon",{staticClass:"text-2xl w-8 cursor-pointer text-gray-500 hover:text-black",class:{expanded:t.expanded["account"]},attrs:{icon:"angle-right","fixed-width":""},on:{click:function(e){t.unique?t.toggleFolder("account"):t.$modal.login()}}}),t.unique?n("router-link",{staticClass:"file cursor-default",attrs:{to:"/account/",event:"dblclick"},nativeOn:{contextmenu:function(e){return e.preventDefault(),t.contextmenu(e,"account/")}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock-open",transform:"down-1 shrink-11"}})],1),n("div",[t._v("account")])],1):n("a",{staticClass:"file",on:{click:function(e){return t.$modal.login()}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock",transform:"down-1 shrink-11"}})],1),n("div",[t._v("account")])],1)],1),t.expanded["account"]?n("li",{key:"account-expanded",staticClass:"pl-8"},[t.unique?n("file-view-list",{attrs:{path:t.path+"account/",nested:""}}):t._e()],1):t._e()]:t._e(),t._l(t.files,(function(e){return n("li",{key:e.name,staticClass:"p-2 file",attrs:{title:e.full},on:{contextmenu:function(n){return n.preventDefault(),t.contextmenu(n,e.full)},dblclick:function(n){return t.$root.$emit("download",t.path+e.full)}}},[n("div",{staticClass:"w-8"}),n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"file"}}),n("fa-text",{staticClass:"text-white",attrs:{transform:"down-4 shrink-12",value:e.ext.substr(0,4)}})],1),n("div",{staticClass:"truncate"},[t._v(t._s(e.full))])],1)}))],2):t.nested?t._e():n("div",{staticClass:"text-xl pt-8 pb-4"},[n("fa-layers",{staticClass:"text-6xl"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"sad-tear",transform:"down-1 shrink-10"}})],1),n("br"),t._v("\n    this folder is empty\n  ")],1)])},ht=[],mt=(n("8e6e"),n("bd86"));function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(mt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt={name:"file-view-list",extends:ct,components:{FileViewList:wt},props:{nested:Boolean},data:function(){return{expanded:{}}},computed:bt({},Object(v["c"])(["unique"])),methods:{beforeRefresh:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.expanded={};case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),expandLocked:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.unlockFolder(e);case 2:n=t.sent,n&&this.toggleFolder(e);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),toggleFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,this.unlockFolder(e);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return");case 6:void 0===this.expanded[e]&&this.$set(this.expanded,e,!1),this.expanded[e]=!this.expanded[e];case 8:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}},gt=yt,xt=(n("7bf6"),Object(u["a"])(gt,dt,ht,!1,null,null,null)),wt=xt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDropzone||t.isUploading,expression:"showDropzone || isUploading"}],staticClass:"file-dropzone",class:{hover:t.isHovering},on:{dragover:function(t){t.preventDefault()},dragenter:function(e){e.preventDefault(),t.isHovering=!0},dragleave:function(e){if(e.preventDefault(),e.target!==e.currentTarget)return null;t.isHovering=!1},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[t.showDropzone||t.isUploading?n("label",{directives:[{name:"click-out",rawName:"v-click-out",value:t.hide,expression:"hide"}],staticClass:"message m-4"},[n("input",{staticClass:"visually-hidden",attrs:{accept:t._f("extensions")(t.allExtensions),type:"file",multiple:""},on:{change:t.onChange}}),n("div",{staticClass:"text-4xl"},[t.isUploading?[t._v("\n        Uploading "+t._s(t.isConverting?"and converting":"")+" files...\n      ")]:t.numDropping?[t._v("\n        Drop "+t._s(t.numDropping)+" item"+t._s(t.numDropping>1?"s":"")+" here to\n        upload\n      ")]:[t._v("\n        Drop items or\n        "),n("span",{staticClass:"text-blue-500"},[t._v("click")]),t._v("\n        to upload\n      ")]],2),t.numDropping||t.isUploading?t._e():n("button",{staticClass:"link text-2xl text-red-500",on:{click:t.hide}},[t._v("\n      cancel\n    ")])]):t._e()])},_t=[];n("aef6");function Ct(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Ot(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Ot(t,e){if(t){if("string"===typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $t=[".DS_Store","Thumbs.db"];function Et(t){return new Promise((function(e){t.file((function(t){return e(t)}))}))}function Dt(t){var e=t.createReader();return new Promise((function(t){e.readEntries((function(e){return t(e)}))}))}function Rt(t){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s,c,u=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:"",r=[],!e.isFile||$t.includes(e.name)){t.next=10;break}return t.next=5,Et(e);case 5:o=t.sent,a=new File([o],n+e.name,{type:o.type}),r.push(a),t.next=20;break;case 10:if(!e.isDirectory){t.next=20;break}return n+=e.name+"/",t.next=14,Dt(e);case 14:return i=t.sent,s=i.map((function(t){return Rt(t,n)})),t.next=18,Promise.all(s);case 18:c=t.sent,r.push.apply(r,Object(w["a"])(c));case 20:return t.abrupt("return",r);case 21:case"end":return t.stop()}}),t)}))),Pt.apply(this,arguments)}function St(t){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],r=e.dataTransfer.items,o=Ct(r),t.prev=3,o.s();case 5:if((a=o.n()).done){t.next=15;break}if(i=a.value,s=i.webkitGetAsEntry(),!s){t.next=13;break}return t.next=11,Rt(s);case 11:c=t.sent,n.push.apply(n,Object(w["a"])(c));case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),o.e(t.t0);case 20:return t.prev=20,o.f(),t.finish(20);case 23:return t.abrupt("return",n.flat(1/0));case 24:case"end":return t.stop()}}),t,null,[[3,17,20,23]])}))),Ft.apply(this,arguments)}function At(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Tt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Tt(t,e){if(t){if("string"===typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(t,e):void 0}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Object(mt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ut={props:{path:String},data:function(){return{showDropzone:!1,isHovering:!1,isConverting:!1,isUploading:!1,numDropping:0,numEvents:0}},computed:Mt(Mt({},Object(v["b"])(["allExtensions"])),Object(v["c"])(["extensions"])),created:function(){document.body.addEventListener("dragenter",this.onDragEnter),document.body.addEventListener("dragleave",this.onDragLeave)},destroyed:function(){document.body.removeEventListener("dragenter",this.onDragEnter),document.body.removeEventListener("dragleave",this.onDragLeave)},methods:{onDragEnter:function(t){var e=t.dataTransfer.types;this.numEvents++,this.numDropping=e.filter((function(t){return"Files"===t})).length,this.showDropzone=!0},onDragLeave:function(t){this.numEvents--,this.numEvents||(this.showDropzone=!1,this.numDropping=0)},onDrop:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isHovering=!1,t.next=3,St(e);case 3:return n=t.sent,t.next=6,this.upload(n);case 6:this.numDropping=0;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onChange:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.target.files,t.next=3,this.upload(n);case 3:e.target.value=null,this.numDropping=0;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),upload:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s,c,u,l,p,f,d,h=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isUploading=!0,n=[],r=[],o=[],a=At(e);try{for(s=function(){var t=i.value,e=h.allExtensions.some((function(e){return t.name.toLowerCase().endsWith("."+e)}));e?r.push(t):n.push(t);var a=h.extensions.converted.some((function(e){return t.name.toLowerCase().endsWith("."+e)}));a&&o.push(t)},a.s();!(i=a.n()).done;)s()}catch(m){a.e(m)}finally{a.f()}if(c=!0,!o.length){t.next=13;break}return u=o.map((function(t){return t.name})).join("<br>"),t.next=11,this.$modal.confirm({title:"Convert to PDF",body:"Files will be converted to PDF:<br>".concat(u)+"<br><br><b>NOTE:</b> This can take a while.",okTitle:"upload"});case 11:c=t.sent,this.isConverting=!0;case 13:if(!r.length||!c){t.next=19;break}return l="/"===this.path?"/shared/":this.path,t.next=17,N.upload(l,r);case 17:p=t.sent,200!==p.code?this.$modal.alert({title:"Upload Failed",body:p.error}):(this.$emit("upload"),p.failed&&(f=p.failed.join("<br>"),this.$modal.alert({title:"Convert Failed",body:"Files were unable to be converted:<br>".concat(f)})),l!==this.path&&this.$router.push(l));case 19:this.isConverting=!1,this.isUploading=!1,this.showDropzone=!1,r.length?n.length&&(d=n.map((function(t){return t.name})).join("<br>"),this.$modal.alert({title:"Files Skipped",body:"".concat(n.length," unsupported files skipped:<br>").concat(d)})):this.$modal.alert({title:"Skipping Upload",body:"No supported files found"});case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),show:function(){this.showDropzone=!0},hide:function(){this.showDropzone=!1}}},Nt=Ut,zt=(n("1e7f"),Object(u["a"])(Nt,kt,_t,!1,null,null,null)),qt=zt.exports,Ht={components:{Breadcrumbs:Y,Toolbar:nt,FileViewGrid:ft,FileViewList:wt,FileDropzone:qt},data:function(){return{contextmenu:{show:!1,component:null,path:"",locked:!1,encrypted:!1,key_path:null,top:0,left:0},displayMode:"grid"}},computed:{path:function(){return this.$route.path},menuOptions:function(){var t=this.contextmenu,e=t.component,n=t.path,r=t.locked,o=t.encrypted,a=t.key_path,i="/"===n.slice(-1),s=!e||i&&!r,c=e&&!["/shared/","/account/"].includes(n),u=!o&&!a&&i&&c;return{isFolder:i,canCreate:s,canModify:c,canEncrypt:u}}},mounted:function(){var t=this;this.$root.$on("contextmenu",this.showContextMenu),this.$root.$on("download",N.download),this.$once("hook:beforeDestroy",(function(){t.$root.$off("contextmenu",t.showContextMenu),t.$root.$off("download",N.download)}))},methods:{refresh:function(){this.contextmenu.component?this.contextmenu.component.refresh():this.$root.$emit("refresh")},showDropzone:function(){this.$refs.dropzone.show()},verifyKey:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e,n){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=N.keys.get(e),!r){t.next=3;break}return t.abrupt("return",r);case 3:return t.next=5,this.$modal.prompt({title:"".concat(n," Folder"),body:"Please provide the key for this folder:",okTitle:"continue",password:!0});case 5:if(r=t.sent,r){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,N.verifyKey(e,r);case 10:if(o=t.sent,a=o.success,a){t.next=15;break}return this.$modal.alert({title:"".concat(n," Cancelled"),body:"The provided key was incorrect"}),t.abrupt("return");case 15:return N.keys.add(e,r),t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),newFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=e||this.path,"/"===e&&(e="/shared/"),!this.contextmenu.key_path){t.next=8;break}return t.next=5,this.verifyKey(e,"Create");case 5:if(n=t.sent,n){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,this.$modal.prompt({title:"New Folder",body:"Creating folder in ".concat(e,"<br>Please provide a name:"),default:"new folder"});case 10:if(r=t.sent,r){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,N.create(e+r);case 15:if(o=t.sent,a=o.success,a){t.next=20;break}return this.$modal.alert({title:"Name Already Exists",body:"Please select a different name"}),t.abrupt("return");case 20:e!==this.path?this.$router.push(e):this.refresh();case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deleteItem:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.contextmenu,n=e.path,r=e.key_path,o=this.menuOptions.isFolder,!r){t.next=8;break}return t.next=5,this.verifyKey(n,"Delete");case 5:if(a=t.sent,a){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,this.$modal.confirm({title:"Delete ".concat(o?"Folder":"File"),body:"Are you sure you want to delete ".concat(n,"?"),okClass:"danger",okTitle:"delete",cancelClass:""});case 10:if(i=t.sent,i){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,N.delete(n);case 15:this.refresh();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadItem:function(){N.download(this.contextmenu.path)},renameItem:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.contextmenu,n=e.path,r=e.key_path,o=this.menuOptions.isFolder,a=/([^/]+)\/?$/.exec(n)[1],!r){t.next=9;break}return t.next=6,this.verifyKey(n,"Rename");case 6:if(i=t.sent,i){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,this.$modal.prompt({title:"Rename ".concat(o?"Folder":"File"),body:"Renaming ".concat(n,"<br>Please provide a name:"),default:a});case 11:if(s=t.sent,s){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,N.rename(n,s);case 16:this.refresh();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),encryptFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.contextmenu.path,t.next=3,this.$modal.prompt({title:"Lock Folder",body:"Encrypting ".concat(e,"<br>Please provide a key:"),okTitle:"continue",password:!0});case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.$modal.prompt({title:"Lock Folder",body:"Encrypting ".concat(e,"<br>Please verify your key:"),okTitle:"continue",password:!0});case 8:if(r=t.sent,r){t.next=11;break}return t.abrupt("return");case 11:if(n===r){t.next=14;break}return this.$modal.alert({title:"Encryption Cancelled",body:"The keys you provided did not match"}),t.abrupt("return");case 14:return t.next=16,this.$modal.confirm({title:"Confirm Encryption",body:"Are you sure you want to continue?<br><br><b>NOTE:</b> If you lose your key, you will be unable to recover the files in this folder.",okTitle:"encrypt",okClass:"danger"});case 16:if(o=t.sent,o){t.next=19;break}return t.abrupt("return");case 19:return t.next=21,N.encrypt(e,n);case 21:N.keys.add(e,n),this.refresh();case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),decryptFolder:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.contextmenu.path,t.next=3,this.$modal.prompt({title:"Decrypt Folder",body:"Decrypting ".concat(e,"<br>Please enter the key:"),password:!0});case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,N.decrypt(e,n);case 8:N.keys.remove(e),this.refresh();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showContextMenu:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.contextmenu.show=!0,this.contextmenu.path=e.path,this.contextmenu.locked=e.locked,this.contextmenu.encrypted=e.encrypted,this.contextmenu.key_path=e.key_path,this.contextmenu.component=e.component,t.next=8,this.$nextTick();case 8:n=this.$refs.contextmenu,r=e.event,o=r.pageX,a=r.pageY,i=Math.min(a+3,innerHeight-n.clientHeight-10),s=Math.min(o+3,innerWidth-n.clientWidth-10),this.contextmenu.top=i+"px",this.contextmenu.left=s+"px";case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),hideContextMenu:function(){this.contextmenu.show=!1,this.contextmenu.path="",this.contextmenu.locked=!1,this.contextmenu.encrypted=!1,this.contextmenu.key_path=null,this.contextmenu.component=null}}},Kt=Ht,Bt=(n("0117"),Object(u["a"])(Kt,b,y,!1,null,null,null)),Vt=Bt.exports,Wt={components:{FileExplorer:Vt},data:function(){return{showMore:!1}},computed:Object(v["c"])(["authEnabled","token","name","extensions"])},Jt=Wt,Xt=(n("21bb"),Object(u["a"])(Jt,h,m,!1,null,null,null)),Gt=Xt.exports;r["a"].use(d["a"]);var Yt=new d["a"]({mode:"history",base:"/",routes:[{path:"/*",name:"home",component:Gt}]});Yt.beforeEach((function(t,e,n){var r=t.path.replace(/\/\/+/g,"/");"/"!==r.slice(-1)&&(r+="/"),r!==t.path&&n({path:r,replace:!0}),n()}));var Qt=Yt,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showing?n("div",{staticClass:"modal",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"p-4"},[t.options.title?n("h2",[t._v(t._s(t.options.title))]):t._e(),t.options.body?n("p",{domProps:{innerHTML:t._s(t.options.body)}}):t._e(),n("div",{staticClass:"mt-2"},["prompt"===t.options.type?["checkbox"===(t.options.password?"password":"text")?n("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],ref:"prompt",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.input1)?t._i(t.input1,null)>-1:t.input1},on:{change:function(e){var n=t.input1,r=e.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);r.checked?i<0&&(t.input1=n.concat([a])):i>-1&&(t.input1=n.slice(0,i).concat(n.slice(i+1)))}else t.input1=o}}}):"radio"===(t.options.password?"password":"text")?n("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],ref:"prompt",attrs:{type:"radio"},domProps:{checked:t._q(t.input1,null)},on:{change:function(e){t.input1=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],ref:"prompt",attrs:{type:t.options.password?"password":"text"},domProps:{value:t.input1},on:{input:function(e){e.target.composing||(t.input1=e.target.value)}}})]:"login"===t.options.type?[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],ref:"login",class:{"border-red-500":t.error},attrs:{placeholder:"username",type:"text"},domProps:{value:t.input1},on:{input:function(e){e.target.composing||(t.input1=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.input2,expression:"input2"}],class:{"border-red-500":t.error},attrs:{placeholder:"password",type:"password"},domProps:{value:t.input2},on:{input:function(e){e.target.composing||(t.input2=e.target.value)}}}),t.error?n("p",{staticClass:"text-red-500"},[t._v("\n            incorrect login or password\n          ")]):t._e(),t._m(0),t._m(1)]:t._e()],2)]),n("div",{staticClass:"modal-actions"},["alert"!==t.options.type?n("button",{staticClass:"btn",class:t.options.cancelClass,on:{click:t.cancel}},[t._v("\n        "+t._s(t.options.cancelTitle)+"\n      ")]):t._e(),n("button",{staticClass:"btn",class:t.options.okClass,attrs:{disabled:t.okDisabled},on:{click:t.ok}},[t._v("\n        "+t._s(t.options.okTitle)+"\n      ")])])])]):t._e()},te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("a",{staticClass:"link text-blue-500",attrs:{href:"https://home.nanome.ai/login/forgot",target:"_blank"}},[t._v("\n              forgot password?\n            ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-xs text-gray-700"},[t._v("\n            Don't have a Nanome account?\n            "),n("a",{staticClass:"link text-blue-500",attrs:{href:"https://home.nanome.ai/register",target:"_blank"}},[t._v("\n              Register here\n            ")])])}];function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){Object(mt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var re={type:"confirm",title:"",body:"",default:"",okTitle:"ok",okClass:"primary",cancelTitle:"cancel",cancelClass:"",password:!1},oe=function(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n},ae={data:function(){return{showing:!1,error:!1,loading:!1,options:ne({},re),input1:"",input2:"",deferred:oe()}},computed:{okDisabled:function(){return!!this.loading||("login"===this.options.type?!this.input1||!this.input2:"prompt"===this.options.type&&!this.input1)}},mounted:function(){document.body.addEventListener("keydown",this.onKeydown)},destroyed:function(){document.body.removeEventListener("keydown",this.onKeydown)},methods:{onKeydown:function(t){this.showing&&("Enter"===t.key?this.ok():"Escape"===t.key&&this.cancel())},show:function(t){var e=this;return Object.assign(this.options,re,t),this.showing=!0,"prompt"===this.options.type?(this.input1=this.options.default,this.$nextTick((function(){var t=e.$refs.prompt;t.focus(),t.setSelectionRange(0,t.value.lastIndexOf("."))}))):"login"===this.options.type&&this.$nextTick((function(){return e.$refs.login.focus()})),this.deferred=oe(),this.deferred},alert:function(t){return this.show(ne({type:"alert",okClass:""},t))},confirm:function(t){return this.show(ne({type:"confirm"},t))},prompt:function(t){return this.show(ne({type:"prompt"},t))},login:function(t){return this.show(ne({type:"login",title:"Log in to Nanome",body:"Log in using your Nanome account",okTitle:"log in",okClass:"primary",cancelClass:""},t))},reset:function(){this.showing=!1,this.input1="",this.input2="",this.deferred=null},cancel:function(){"confirm"===this.options.type?this.deferred.resolve(!1):this.deferred.resolve(void 0),this.reset()},ok:function(){if(!this.okDisabled){var t;if("confirm"===this.options.type)t=!0;else if("prompt"===this.options.type)t=this.input1;else if("login"===this.options.type)return void this.attemptLogin();this.deferred.resolve(t),this.reset()}},attemptLogin:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.error=!1,this.loading=!0,e={username:this.input1,password:this.input2},t.next=5,this.$store.dispatch("login",e);case 5:n=t.sent,this.loading=!1,n?(this.deferred.resolve(!0),this.reset()):this.error=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},ie=ae,se=(n("30db"),Object(u["a"])(ie,Zt,te,!1,null,null,null)),ce=se.exports;r["a"].config.productionTip=!1,r["a"].directive("click-out",{bind:function(t,e){t.data={stop:function(t){return t.stopPropagation()},event:function(){return e.value()},esc:function(e){return"Escape"===e.key&&t.data.event()}},setTimeout((function(){document.body.addEventListener("click",t.data.event),document.body.addEventListener("keydown",t.data.esc),t.addEventListener("click",t.data.stop)}),0)},unbind:function(t){document.body.removeEventListener("click",t.data.event),document.body.removeEventListener("keydown",t.data.esc),t.removeEventListener("click",t.data.stop)}}),r["a"].filter("extensions",(function(t){return t?t.map((function(t){return"."+t})).join(", "):""})),E.dispatch("getInfo"),E.dispatch("refresh");var ue=new r["a"]({router:Qt,store:E,render:function(t){return t(f)}}).$mount("#app"),le=r["a"].extend(ce),pe=new le({store:E});pe.$mount(),r["a"].prototype.$modal=pe,ue.$root.$el.appendChild(pe.$el)},"5c0b":function(t,e,n){"use strict";var r=n("e332"),o=n.n(r);o.a},"7a98":function(t,e,n){},"7bf6":function(t,e,n){"use strict";var r=n("5258"),o=n.n(r);o.a},"7fe2":function(t,e,n){},"812f":function(t,e,n){},af21:function(t,e,n){},b751:function(t,e,n){"use strict";var r=n("7fe2"),o=n.n(r);o.a},caf9:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.4d600d0e.png"},def6:function(t,e,n){},e332:function(t,e,n){},e7ab:function(t,e,n){"use strict";var r=n("af21"),o=n.n(r);o.a},fe45:function(t,e,n){}});