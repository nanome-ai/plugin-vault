version: "3.9"
services:
  vault:
    build:
      context: .
      dockerfile: docker/plugin.Dockerfile
    env_file:
      - .env
      - .env.plugin
  vault-server:
    build:
      context: .
      dockerfile: docker/server.Dockerfile
    ports:
      - 80:80
      - 443:443
      # Uncomment if custom VAULT_WEB_PORT needs to be used.
      # - $VAULT_WEB_PORT:$VAULT_WEB_PORT
    volumes:
     - vault-volume:/root
     - .:/app/server
    env_file:
      - .env
      - .env.server
volumes:
  vault-volume:
