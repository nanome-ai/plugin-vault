(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0117":function(e,t,n){"use strict";var r=n("812f"),a=n.n(r);a.a},1140:function(e,t,n){"use strict";var r=n("fe45"),a=n.n(r);a.a},1146:function(e,t,n){},"1e7f":function(e,t,n){"use strict";var r=n("1146"),a=n.n(r);a.a},"21bb":function(e,t,n){"use strict";var r=n("7a98"),a=n.n(r);a.a},"30db":function(e,t,n){"use strict";var r=n("caf9"),a=n.n(r);a.a},5258:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d"),n("def6");var r=n("2b0e"),a=n("ecee"),o=n("ad3d"),i=n("c074");r["a"].component("fa-icon",o["a"]),r["a"].component("fa-layers",o["b"]),r["a"].component("fa-text",o["c"]),a["c"].add({faAngleRight:i["a"],faArrowUp:i["b"],faBars:i["c"],faCloudUploadAlt:i["d"],faFile:i["e"],faFileDownload:i["f"],faFolder:i["g"],faFolderPlus:i["h"],faLock:i["i"],faLockOpen:i["j"],faPen:i["k"],faPlus:i["l"],faSadTear:i["m"],faSearch:i["n"],faSyncAlt:i["o"],faTh:i["p"],faTrash:i["q"]});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-screen h-screen",attrs:{id:"app"}},[n("router-view")],1)},c=[],u=(n("5c0b"),n("2877")),l={},p=Object(u["a"])(l,s,c,!1,null,null,null),f=p.exports,d=(n("a481"),n("8c4f")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home min-h-full container m-auto bg-white flex flex-col"},[e._m(0),n("h1",{staticClass:"font-bold"},[e._v("Upload Files to Nanome")]),e.authEnabled&&!e.token?n("div",[e._m(1),n("button",{staticClass:"text-3xl btn primary rounded-lg",on:{click:function(t){return e.$modal.login()}}},[n("div",{staticClass:"my-2 mx-8"},[n("fa-icon",{staticClass:"mr-2",attrs:{icon:"lock"}}),e._v("\n        Access Vault\n      ")],1)])]):[n("p",{staticClass:"text-lg mb-8"},[e._v("\n      Drag and drop or click the new file button to upload files."),n("br"),e._v("\n      Supports "),n("b",[e._v(e._s(e._f("extensions")(e.extensions.supported))+",")]),e.showMore?e._e():n("button",{staticClass:"ml-2 text-blue-500",on:{click:function(t){e.showMore=!0}}},[e._v("\n        show more...\n      ")]),n("br"),e.showMore?[n("b",[e._v(e._s(e._f("extensions")(e.extensions.extras)))]),n("br")]:e._e(),e._v("\n      Converts to PDF "),n("b",[e._v(e._s(e._f("extensions")(e.extensions.converted)))])],2),n("div",{staticClass:"text-left"},[n("div",{staticClass:"text-lg px-4 py-2 ml-4 rounded bg-gray-200 inline"},[e.name?[e._v("\n          Welcome "),n("b",[e._v(e._s(e.name)+"!")]),e._v("Â \n          "),n("a",{staticClass:"link text-red-500",on:{click:function(t){return e.$store.dispatch("logout")}}},[e._v("log out")])]:[e._v("\n          Welcome!\n          "),n("a",{staticClass:"link text-blue-500",on:{click:function(t){return e.$modal.login()}}},[e._v("log in")])]],2)]),n("file-explorer")]],2)},m=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"mb-4 mx-auto text-white"},[r("div",{staticClass:"inline-flex items-baseline text-5xl"},[r("img",{staticClass:"mr-4",attrs:{src:n("cf05")}}),e._v(" Vault\n    ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-lg mt-4 mb-8"},[e._v("\n      Access shared content from the community "),n("br"),e._v("or share your own with\n      people in your Nanome sessions.\n    ")])}],v=n("2f62"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-explorer flex flex-col m-4 bg-gray-100 rounded flex-grow"},[n("div",{staticClass:"mx-4 mt-4 border-b"},[n("toolbar",{on:{"display-mode":function(t){e.displayMode=t},"new-folder":e.newFolder,"show-upload":e.showDropzone}}),n("breadcrumbs",{attrs:{path:e.path}})],1),n("div",{staticClass:"flex-grow relative select-none px-4",on:{contextmenu:function(t){return t.preventDefault(),e.showContextMenu({event:t,path:e.path})}}},["grid"===e.displayMode?n("file-view-grid",{attrs:{path:e.path}}):n("file-view-list",{attrs:{path:e.path}}),n("file-dropzone",{ref:"dropzone",attrs:{path:e.path},on:{upload:e.refresh}})],1),e.contextmenu.show?n("div",{directives:[{name:"click-out",rawName:"v-click-out",value:e.hideContextMenu,expression:"hideContextMenu"}],ref:"contextmenu",staticClass:"contextmenu",style:{top:e.contextmenu.top,left:e.contextmenu.left},on:{click:e.hideContextMenu}},[n("ul",[e.menuOptions.canCreate?n("li",[n("button",{staticClass:"text-gray-800",on:{click:function(t){return e.newFolder(e.contextmenu.path)}}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"folder-plus",transform:"shrink-2"}}),e._v("\n          new folder\n        ")],1)]):e._e(),e.menuOptions.isFolder?e._e():n("li",[n("button",{staticClass:"text-gray-800",on:{click:e.downloadItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"file-download",transform:"shrink-2"}}),e._v("\n          download\n        ")],1)]),e.menuOptions.canEncrypt?n("li",[n("button",{staticClass:"text-gray-800",on:{click:e.encryptFolder}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"lock",transform:"shrink-2"}}),e._v("\n          encrypt\n        ")],1)]):e.contextmenu.encrypted?n("li",[n("button",{staticClass:"text-gray-800",on:{click:e.decryptFolder}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"lock-open",transform:"shrink-2"}}),e._v("\n          decrypt\n        ")],1)]):e._e(),e.menuOptions.canModify?n("li",[n("button",{staticClass:"text-gray-800",on:{click:e.renameItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"pen",transform:"shrink-2"}}),e._v("\n          rename\n        ")],1)]):e._e(),e.menuOptions.canModify?n("li",[n("button",{staticClass:"text-red-500",on:{click:e.deleteItem}},[n("fa-icon",{staticClass:"icon",attrs:{icon:"trash",transform:"shrink-2"}}),e._v("\n          delete\n        ")],1)]):e._e()])]):e._e()])},y=[],g=(n("ac6a"),n("96cf"),n("3b8d")),x=(n("6762"),n("2fdb"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("f559"),n("7f7f"),n("768b")),w=(n("7514"),n("456d"),n("8615"),n("75fc"));r["a"].use(v["a"]);var k={authEnabled:!1,token:localStorage.getItem("user-token")||null,unique:null,name:null,extensions:{supported:[],extras:[],converted:[]}},_={allExtensions:function(e){var t,n=e.extensions;return(t=[]).concat.apply(t,Object(w["a"])(Object.values(n)))}},C={AUTH_ENABLED:function(e){e.authEnabled=!0},PATCH_USER:function(e,t){Object.assign(e,t)},SET_EXTENSIONS:function(e,t){e.extensions=t}};function O(e,t){return j.apply(this,arguments)}function j(){return j=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.success,a=n.results,!r){e.next=15;break}return o={unique:a.user.unique,name:a.user.name,token:a.token.value},t("PATCH_USER",o),localStorage.setItem("user-token",a.token.value),e.prev=5,e.next=8,z.create("/"+a.user.unique);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](5);case 12:return e.abrupt("return",!0);case 15:return localStorage.removeItem("user-token"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[5,10]])}))),j.apply(this,arguments)}var $={getInfo:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,z.getInfo();case 3:r=e.sent,a=r.extensions,n("SET_EXTENSIONS",a);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,z.login(n);case 3:return a=e.sent,e.abrupt("return",O(r,a));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,z.refresh();case 3:return r=e.sent,e.abrupt("return",O(n,r));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("PATCH_USER",{token:null,name:null,unique:null}),localStorage.removeItem("user-token");case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},E=new v["a"].Store({state:k,getters:_,mutations:C,actions:$});function D(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=P(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function P(e,t){if(e){if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S="https://api.nanome.ai/user";function F(e){return e.replace(/^\/account/,"/"+E.state.unique)}function T(e){return e.replace(/\b$/,"/")}function A(e){return L.apply(this,arguments)}function L(){return L=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},E.state.token&&!t.startsWith(S)&&(n.headers=Object.assign({},n.headers,{Authorization:"Bearer "+E.state.token})),e.next=4,fetch(t,n);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,a.code=r.status,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.key||(n.key=U.keys.get(e)),e=F(e);var r=new FormData;for(var a in r.append("command",t),n){var o=n[a];if(o instanceof Array){var i,s=D(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;r.append(a,c)}}catch(u){s.e(u)}finally{s.f()}}else o&&r.append(a,o)}return A("/files"+e,{method:"POST",body:r})}var M={},U={keys:{add:function(e,t){e=T(e),M[e]=t},get:function(e){e=T(e);var t=Object.keys(M),n=t.find((function(t){return 0==e.indexOf(t)}));return M[n]},remove:function(e){e=T(e),delete M[e]}},getInfo:function(){return A("/info")},login:function(e){var t=e.username,n=e.password,r={login:t,pass:n,source:"web:plugin-vault"};return A("".concat(S,"/login"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)})},refresh:function(){var e=E.state.token;return e?A("".concat(S,"/session"),{headers:{Authorization:"Bearer ".concat(e)}}):{}},download:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={headers:{}},r=U.keys.get(t),r&&(n.headers["Vault-Key"]=r),E.state.token&&(n.headers["Authorization"]="Bearer "+E.state.token),t=F(t),e.next=7,fetch("/files"+t,n).then((function(e){return e.blob()}));case 7:a=e.sent,o=document.createElement("a"),i=URL.createObjectURL(a),o.href=i,o.download=t.substring(t.lastIndexOf("/")+1),document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(i);case 16:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),list:function(e){var t={headers:{}},n=U.keys.get(e);return n&&(t.headers["Vault-Key"]=n),e=F(e),A("/files"+e,t)},getFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={path:"",parent:"",folders:[],locked:[],files:[]},"/"!==t.slice(-1)&&(t+="/"),"/"!==t&&(r=t.slice(0,-1).lastIndexOf("/"),n.parent=t.substring(0,r)+"/"),e.next=5,U.list(t);case 5:if(a=e.sent,a.success){e.next=10;break}throw o=new Error(a.error),o.code=a.code,o;case 10:return n.path=t,n.locked_path=a.locked_path,n.locked=a.locked,n.folders=a.folders,n.files=a.files.map((function(e){var t=/^(.+?)(?:\.(\w+))?$/.exec(e.name),n=Object(x["a"])(t,3),r=n[0],a=n[1],o=n[2],i=void 0===o?"":o;return{full:r,name:a,ext:i,size_text:e.size_text}})),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),upload:function(e,t,n){if(t&&t.length){var r=new FormData;r.append("command","upload"),r.append("key",U.keys.get(e));var a,o=D(t);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.append("files",i)}}catch(c){o.e(c)}finally{o.f()}e=F(e);var s={};return E.state.token&&(s["Authorization"]="Bearer "+E.state.token),new Promise((function(t){var a=new XMLHttpRequest;a.open("POST","/files"+e,!0),a.upload.addEventListener("progress",n),a.addEventListener("load",(function(){var e=JSON.parse(a.responseText);e.code=a.status,t(e)})),a.send(r)}))}},delete:function(e){return I(e,"delete")},create:function(e){return I(e,"create")},rename:function(e,t){return I(e,"rename",{name:t})},encrypt:function(e,t){return I(e,"encrypt",{key:t})},decrypt:function(e,t){return I(e,"decrypt",{key:t})},verifyKey:function(e,t){return I(e,"verify",{key:t})}},z=U,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"breadcrumbs flex text-xl py-3 items-center"},[n("router-link",{staticClass:"btn rounded mr-2",attrs:{to:e.parentPath,event:e.parentPath?"click":"",tabindex:e.parentPath?"":-1,disabled:!e.parentPath,tag:"button"}},[n("fa-icon",{attrs:{icon:"arrow-up"}})],1),e._l(e.subpaths.slice(0,-1),(function(t){var r=t.name,a=t.path;return n("div",{key:a},[a?n("router-link",{staticClass:"px-3",attrs:{to:a}},[e._v(e._s(r))]):n("span",{staticClass:"px-3"},[e._v(e._s(r))]),n("fa-icon",{attrs:{icon:"angle-right"}})],1)})),n("div",{staticClass:"text-gray-600 px-3"},[e._v(e._s(e.currentName))])],2)},q=[];n("28a5");function H(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=K(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function K(e,t){if(e){if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V,W,J={props:{path:String},computed:{subpaths:function(){var e,t=this.path.slice(0,-1).split("/"),n=[],r="",a=H(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;r+=o+"/",o||(o="files"),n.push({name:o,path:r})}}catch(i){a.e(i)}finally{a.f()}return n.length>5&&n.splice(3,n.length-5,{name:"..."}),n},currentName:function(){return this.subpaths[this.subpaths.length-1].name},parentPath:function(){if("/"==this.path)return"";var e=this.path.slice(0,-1).lastIndexOf("/");return this.path.slice(0,e)+"/"}}},X=J,G=(n("e7ab"),Object(u["a"])(X,N,q,!1,null,null,null)),Y=G.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar flex text-lg items-center"},[n("div",{staticClass:"toggle relative mr-2 flex"},[n("input",{attrs:{checked:"",value:"grid",type:"radio",name:"display-mode",id:"display-mode-grid"},on:{input:function(t){return e.$emit("display-mode",t.target.value)}}}),n("label",{staticClass:"btn rounded-l",attrs:{for:"display-mode-grid",title:"grid view"}},[n("fa-icon",{attrs:{icon:"th"}})],1),n("input",{attrs:{value:"list",type:"radio",name:"display-mode",id:"display-mode-list"},on:{input:function(t){return e.$emit("display-mode",t.target.value)}}}),n("label",{staticClass:"btn rounded-r",attrs:{for:"display-mode-list",title:"list view"}},[n("fa-icon",{attrs:{icon:"bars"}})],1)]),n("button",{staticClass:"btn rounded mr-2",attrs:{title:"refresh"},on:{click:function(t){return e.$root.$emit("refresh")}}},[n("fa-icon",{attrs:{icon:"sync-alt"}}),n("span",{staticClass:"hidden ml-1 lg:inline"},[e._v(" refresh")])],1),n("button",{staticClass:"btn rounded mr-2",attrs:{title:"new folder"},on:{click:function(t){return e.$emit("new-folder")}}},[n("fa-layers",[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"plus",transform:"down-1 shrink-10"}})],1),n("span",{staticClass:"hidden ml-1 lg:inline"},[e._v(" new folder")])],1),n("button",{staticClass:"btn rounded",attrs:{title:"upload"},on:{click:function(t){return e.$emit("show-upload")}}},[n("fa-icon",{attrs:{icon:"cloud-upload-alt"}}),n("span",{staticClass:"hidden ml-1 lg:inline"},[e._v(" upload")])],1)])},Z=[],ee=(n("b751"),{}),te=Object(u["a"])(ee,Q,Z,!1,null,null,null),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",{staticClass:"file-view-grid pt-4 text-lg",class:{grid:e.files.length||e.folders.length}},[e._l(e.folders,(function(t){return[e.encrypted.includes(t.name)?n("a",{key:t.name,staticClass:"cursor-default",attrs:{title:t.name+" ("+t.size_text+")"},on:{dblclick:function(n){return e.openLocked(t.name)},contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.name+"/",!0)}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:e.isLocked(t.name)?"lock":"lock-open",transform:"down-1 shrink-11"}})],1),n("div",{staticClass:"truncate"},[e._v(e._s(t.name))])],1):n("router-link",{key:t.name,staticClass:"cursor-default",attrs:{title:t.name+" ("+t.size_text+")",to:""+e.path+t.name+"/",event:"dblclick"},nativeOn:{contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.name+"/")}}},[n("fa-icon",{staticClass:"icon pointer-events-none",attrs:{icon:"folder"}}),n("div",{staticClass:"truncate"},[e._v(e._s(t.name))])],1)]})),"/"==e.path?[e.$store.state.unique?n("router-link",{staticClass:"cursor-default",attrs:{to:"/account/",event:"dblclick"},nativeOn:{contextmenu:function(t){return t.preventDefault(),e.contextmenu(t,"account/")}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock-open",transform:"down-1 shrink-11"}})],1),n("div",[e._v("account")])],1):n("a",{on:{dblclick:function(t){return e.$modal.login()}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock",transform:"down-1 shrink-11"}})],1),n("div",[e._v("account")])],1)]:e._e(),e._l(e.files,(function(t){return n("div",{key:t.full,attrs:{title:t.full+" ("+t.size_text+")"},on:{contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.full)},dblclick:function(n){return e.$root.$emit("download",e.path+t.full)}}},[n("fa-layers",{staticClass:"icon"},[n("fa-icon",{attrs:{icon:"file"}}),n("fa-text",{staticClass:"text-white",attrs:{transform:"down-4 shrink-"+(t.ext.length<5?12:13),value:t.ext}})],1),n("div",{staticClass:"truncate"},[e._v(e._s(t.name))])],1)})),e.files.length||e.folders.length?e._e():n("div",{staticClass:"text-xl py-4"},[n("fa-layers",{staticClass:"text-6xl"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"sad-tear",transform:"down-1 shrink-10"}})],1),n("br"),e._v("\n    this folder is empty\n  ")],1)],2)},ae=[],oe={props:{path:String},data:function(){return{loading:!0,key_path:null,encrypted:[],folders:[],files:[]}},watch:{path:{handler:"refresh",immediate:!0},"$store.state.token":"refresh"},mounted:function(){var e=this;this.$root.$on("refresh",this.refresh),this.$once("hook:beforeDestroy",(function(){e.$root.$off("refresh",e.refresh)}))},methods:{refresh:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.beforeRefresh&&t&&this.beforeRefresh(),this.loading=!0,e.prev=2,e.next=5,z.getFolder(this.path);case 5:n=e.sent,this.key_path=n.locked_path,this.encrypted=n.locked,this.folders=n.folders,this.files=n.files,this.loading=!1,e.next=25;break;case 13:if(e.prev=13,e.t0=e["catch"](2),401!==e.t0.code){e.next=18;break}return this.$store.commit("AUTH_ENABLED"),e.abrupt("return");case 18:if(403!==e.t0.code){e.next=24;break}return e.next=21,this.unlockFolder();case 21:if(r=e.sent,!r){e.next=24;break}return e.abrupt("return",this.refresh());case 24:this.$router.push("/");case 25:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(t){return e.apply(this,arguments)}return t}(),contextmenu:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.stopPropagation(),this.$root.$emit("contextmenu",{event:e,path:this.path+t,locked:this.isLocked(t),encrypted:n,key_path:this.key_path,component:this})},isLocked:function(e){e=e.replace(/\/$/,"");var t=this.loading||this.encrypted.includes(e),n=!z.keys.get(this.path+e);return t&&n},unlockFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"",n=this.path+t,this.isLocked(t)){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.$modal.prompt({title:"Unlock Folder",body:"Attempting to view ".concat(n,"<br>Please enter key:"),password:!0});case 6:if(r=e.sent,r){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,z.verifyKey(n,r);case 11:if(a=e.sent,o=a.success,o){e.next=17;break}return e.next=16,this.$modal.alert({title:"Unlock Failed",body:"The provided key was incorrect"});case 16:return e.abrupt("return",!1);case 17:return z.keys.add(n,r),e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openLocked:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unlockFolder(t);case 2:n=e.sent,n&&this.$router.push(this.path+t).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},ie=oe,se=Object(u["a"])(ie,V,W,!1,null,null,null),ce=se.exports,ue={extends:ce},le=ue,pe=(n("1140"),Object(u["a"])(le,re,ae,!1,null,null,null)),fe=pe.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",{staticClass:"file-view-list text-lg"},[e.files.length||e.folders.length?n("ul",{staticClass:"w-full"},[e._l(e.folders,(function(t){return[n("li",{key:t.name,staticClass:"p-2 flex items-center"},[n("fa-icon",{staticClass:"text-2xl w-8 cursor-pointer text-gray-500 hover:text-black",class:{expanded:e.expanded[t.name]},attrs:{icon:"angle-right","fixed-width":""},on:{click:function(n){e.toggleFolder(t.name,e.isLocked(t.name))}}}),e.encrypted.includes(t.name)?n("a",{staticClass:"file cursor-default",attrs:{title:t.name+" ("+t.size_text+")"},on:{dblclick:function(n){return e.openLocked(t.name)},contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.name+"/",!0)}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:e.isLocked(t.name)?"lock":"lock-open",transform:"down-1 shrink-11"}})],1),n("div",{staticClass:"truncate"},[e._v(e._s(t.name))])],1):n("router-link",{staticClass:"file cursor-default",attrs:{title:t.name+" ("+t.size_text+")",to:""+e.path+t.name+"/",event:"dblclick"},nativeOn:{contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.name+"/")}}},[n("fa-icon",{staticClass:"icon mr-2",attrs:{icon:"folder"}}),n("div",{staticClass:"truncate"},[e._v(e._s(t.name))])],1)],1),e.expanded[t.name]?n("li",{key:t.name+"-expanded",staticClass:"pl-8"},[n("file-view-list",{attrs:{path:""+e.path+t.name+"/",nested:""}})],1):e._e()]})),"/"==e.path?[n("li",{staticClass:"p-2 flex items-center"},[n("fa-icon",{staticClass:"text-2xl w-8 cursor-pointer text-gray-500 hover:text-black",class:{expanded:e.expanded["account"]},attrs:{icon:"angle-right","fixed-width":""},on:{click:function(t){e.unique?e.toggleFolder("account"):e.$modal.login()}}}),e.unique?n("router-link",{staticClass:"file cursor-default",attrs:{to:"/account/",event:"dblclick"},nativeOn:{contextmenu:function(t){return t.preventDefault(),e.contextmenu(t,"account/")}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock-open",transform:"down-1 shrink-11"}})],1),n("div",[e._v("account")])],1):n("a",{staticClass:"file",on:{click:function(t){return e.$modal.login()}}},[n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"lock",transform:"down-1 shrink-11"}})],1),n("div",[e._v("account")])],1)],1),e.expanded["account"]?n("li",{key:"account-expanded",staticClass:"pl-8"},[e.unique?n("file-view-list",{attrs:{path:e.path+"account/",nested:""}}):e._e()],1):e._e()]:e._e(),e._l(e.files,(function(t){return n("li",{key:t.full,staticClass:"p-2 file",attrs:{title:t.full+" ("+t.size_text+")"},on:{contextmenu:function(n){return n.preventDefault(),e.contextmenu(n,t.full)},dblclick:function(n){return e.$root.$emit("download",e.path+t.full)}}},[n("div",{staticClass:"w-8"}),n("fa-layers",{staticClass:"icon mr-2"},[n("fa-icon",{attrs:{icon:"file"}}),n("fa-text",{staticClass:"text-white",attrs:{transform:"down-4 shrink-"+(t.ext.length<5?12:13),value:t.ext}})],1),n("div",{staticClass:"truncate"},[e._v(e._s(t.full))])],1)}))],2):e.nested?e._e():n("div",{staticClass:"text-xl pt-8 pb-4"},[n("fa-layers",{staticClass:"text-6xl"},[n("fa-icon",{attrs:{icon:"folder"}}),n("fa-icon",{staticClass:"text-white",attrs:{icon:"sad-tear",transform:"down-1 shrink-10"}})],1),n("br"),e._v("\n    this folder is empty\n  ")],1)])},he=[],me=(n("8e6e"),n("bd86"));function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(me["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={name:"file-view-list",extends:ce,components:{FileViewList:we},props:{nested:Boolean},data:function(){return{expanded:{}}},computed:be({},Object(v["c"])(["unique"])),methods:{beforeRefresh:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.expanded={};case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),expandLocked:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unlockFolder(t);case 2:n=e.sent,n&&this.toggleFolder(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,this.unlockFolder(t);case 3:if(r=e.sent,r){e.next=6;break}return e.abrupt("return");case 6:void 0===this.expanded[t]&&this.$set(this.expanded,t,!1),this.expanded[t]=!this.expanded[t];case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}},ge=ye,xe=(n("7bf6"),Object(u["a"])(ge,de,he,!1,null,null,null)),we=xe.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showDropzone||e.isUploading,expression:"showDropzone || isUploading"}],staticClass:"file-dropzone",class:{hover:e.isHovering},on:{dragover:function(e){e.preventDefault()},dragenter:function(t){t.preventDefault(),e.isHovering=!0},dragleave:function(t){if(t.preventDefault(),t.target!==t.currentTarget)return null;e.isHovering=!1},drop:function(t){return t.preventDefault(),e.onDrop(t)}}},[e.showDropzone||e.isUploading?n("label",{directives:[{name:"click-out",rawName:"v-click-out",value:e.hide,expression:"hide"}],staticClass:"message m-4"},[n("input",{staticClass:"visually-hidden",attrs:{accept:e._f("extensions")(e.allExtensions),type:"file",multiple:""},on:{change:e.onChange}}),n("div",{staticClass:"text-4xl"},[e.isUploading?[e._v("\n        Uploading "+e._s(e.isConverting?"and converting":"")+" files...\n        "),n("div",{staticClass:"relative pt1"},[n("div",{staticClass:"overflow-hidden h-2 mb-4 rounded bg-gray-400"},[n("div",{staticClass:"h-full bg-blue-500",style:{width:100*e.uploadProgress+"%"}})])])]:e.numDropping?[e._v("\n        Drop "+e._s(e.numDropping)+" item"+e._s(e.numDropping>1?"s":"")+" here to\n        upload\n      ")]:[e._v("\n        Drop items or\n        "),n("span",{staticClass:"text-blue-500"},[e._v("click")]),e._v("\n        to upload\n      ")]],2),e.numDropping||e.isUploading?e._e():n("button",{staticClass:"link text-2xl text-red-500",on:{click:e.hide}},[e._v("\n      cancel\n    ")])]):e._e()])},_e=[];n("aef6");function Ce(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Oe(e,t){if(e){if("string"===typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $e=[".DS_Store","Thumbs.db"];function Ee(e){return new Promise((function(t){e.file((function(e){return t(e)}))}))}function De(e){var t=e.createReader();return new Promise((function(e){t.readEntries((function(t){return e(t)}))}))}function Pe(e){return Re.apply(this,arguments)}function Re(){return Re=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:"",r=[],!t.isFile||$e.includes(t.name)){e.next=10;break}return e.next=5,Ee(t);case 5:a=e.sent,o=new File([a],n+t.name,{type:a.type}),r.push(o),e.next=20;break;case 10:if(!t.isDirectory){e.next=20;break}return n+=t.name+"/",e.next=14,De(t);case 14:return i=e.sent,s=i.map((function(e){return Pe(e,n)})),e.next=18,Promise.all(s);case 18:c=e.sent,r.push.apply(r,Object(w["a"])(c));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}function Se(e){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],r=Ce(t.dataTransfer.items);try{for(r.s();!(a=r.n()).done;)o=a.value,i=o.webkitGetAsEntry(),i&&n.push(i)}catch(f){r.e(f)}finally{r.f()}s=[],c=0,u=n;case 5:if(!(c<u.length)){e.next=14;break}return l=u[c],e.next=9,Pe(l);case 9:p=e.sent,s.push.apply(s,Object(w["a"])(p));case 11:c++,e.next=5;break;case 14:return e.abrupt("return",s.flat(1/0));case 15:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}function Te(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ae(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ae(e,t){if(e){if("string"===typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Object(me["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue={props:{path:String},data:function(){return{showDropzone:!1,isHovering:!1,isConverting:!1,isUploading:!1,numDropping:0,numEvents:0,uploadProgress:0}},computed:Me(Me({},Object(v["b"])(["allExtensions"])),Object(v["c"])(["extensions"])),created:function(){document.body.addEventListener("dragenter",this.onDragEnter),document.body.addEventListener("dragleave",this.onDragLeave)},destroyed:function(){document.body.removeEventListener("dragenter",this.onDragEnter),document.body.removeEventListener("dragleave",this.onDragLeave)},methods:{onDragEnter:function(e){this.numEvents++,this.numDropping=e.dataTransfer.items.length,this.showDropzone=!0},onDragLeave:function(e){this.numEvents--,this.numEvents||(this.showDropzone=!1,this.numDropping=0)},onDrop:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isHovering=!1,e.next=3,Se(t);case 3:return n=e.sent,e.next=6,this.upload(n);case 6:this.numDropping=0;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onChange:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.files,e.next=3,this.upload(n);case 3:t.target.value=null,this.numDropping=0;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onProgress:function(e){this.uploadProgress=e.loaded/e.total},upload:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,p,f,d,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isUploading=!0,n=[],r=[],a=[],o=Te(t);try{for(s=function(){var e=i.value,t=h.allExtensions.some((function(t){return e.name.toLowerCase().endsWith("."+t)}));t?r.push(e):n.push(e);var o=h.extensions.converted.some((function(t){return e.name.toLowerCase().endsWith("."+t)}));o&&a.push(e)},o.s();!(i=o.n()).done;)s()}catch(m){o.e(m)}finally{o.f()}if(c=!0,!a.length){e.next=13;break}return u=a.map((function(e){return e.name})).join("<br>"),e.next=11,this.$modal.confirm({title:"Convert to PDF",body:"Files will be converted to PDF:<br>".concat(u)+"<br><br><b>NOTE:</b> This can take a while.",okTitle:"upload"});case 11:c=e.sent,this.isConverting=!0;case 13:if(!r.length||!c){e.next=20;break}return l="/"===this.path?"/shared/":this.path,e.next=17,z.upload(l,r,this.onProgress);case 17:p=e.sent,200!==p.code?this.$modal.alert({title:"Upload Failed",body:p.error.message}):(p.failed&&(f=p.failed.join("<br>"),this.$modal.alert({title:"Convert Failed",body:"Files were unable to be converted:<br>".concat(f)})),l!==this.path&&this.$router.push(l)),this.$emit("upload");case 20:this.isConverting=!1,this.isUploading=!1,this.showDropzone=!1,r.length?n.length&&(d=n.map((function(e){return e.name})).join("<br>"),this.$modal.alert({title:"Files Skipped",body:"".concat(n.length," unsupported files skipped:<br>").concat(d)})):this.$modal.alert({title:"Skipping Upload",body:"No supported files found"});case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),show:function(){this.showDropzone=!0},hide:function(){this.showDropzone=!1}}},ze=Ue,Ne=(n("1e7f"),Object(u["a"])(ze,ke,_e,!1,null,null,null)),qe=Ne.exports,He={components:{Breadcrumbs:Y,Toolbar:ne,FileViewGrid:fe,FileViewList:we,FileDropzone:qe},data:function(){return{contextmenu:{show:!1,component:null,path:"",locked:!1,encrypted:!1,key_path:null,top:0,left:0},displayMode:"grid"}},computed:{path:function(){return this.$route.path},menuOptions:function(){var e=this.contextmenu,t=e.component,n=e.path,r=e.locked,a=e.encrypted,o=e.key_path,i="/"===n.slice(-1),s="/account"===n.slice(0,8),c=!t||i&&!r,u=t&&!["/shared/","/account/"].includes(n),l=!a&&!o&&i&&u&&!s;return{isFolder:i,canCreate:c,canModify:u,canEncrypt:l}}},mounted:function(){var e=this;this.$root.$on("contextmenu",this.showContextMenu),this.$root.$on("download",z.download),this.$once("hook:beforeDestroy",(function(){e.$root.$off("contextmenu",e.showContextMenu),e.$root.$off("download",z.download)}))},methods:{refresh:function(){this.contextmenu.component?this.contextmenu.component.refresh():this.$root.$emit("refresh")},showDropzone:function(){this.$refs.dropzone.show()},verifyKey:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=z.keys.get(t),!r){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,this.$modal.prompt({title:"".concat(n," Folder"),body:"Please provide the key for this folder:",okTitle:"continue",password:!0});case 5:if(r=e.sent,r){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,z.verifyKey(t,r);case 10:if(a=e.sent,o=a.success,o){e.next=15;break}return this.$modal.alert({title:"".concat(n," Cancelled"),body:"The provided key was incorrect"}),e.abrupt("return");case 15:return z.keys.add(t,r),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),newFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=t||this.path,"/"===t&&(t="/shared/"),!this.contextmenu.key_path){e.next=8;break}return e.next=5,this.verifyKey(t,"Create");case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.$modal.prompt({title:"New Folder",body:"Creating folder in ".concat(t,"<br>Please provide a name:"),default:"new folder"});case 10:if(r=e.sent,r){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,z.create(t+r);case 15:if(a=e.sent,o=a.success,o){e.next=20;break}return this.$modal.alert({title:"Name Already Exists",body:"Please select a different name"}),e.abrupt("return");case 20:t!==this.path?this.$router.push(t):this.refresh();case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.contextmenu,n=t.path,r=t.key_path,a=this.menuOptions.isFolder,!r){e.next=8;break}return e.next=5,this.verifyKey(n,"Delete");case 5:if(o=e.sent,o){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.$modal.confirm({title:"Delete ".concat(a?"Folder":"File"),body:"Are you sure you want to delete ".concat(n,"?"),okClass:"danger",okTitle:"delete",cancelClass:""});case 10:if(i=e.sent,i){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,z.delete(n);case 15:this.refresh();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadItem:function(){z.download(this.contextmenu.path)},renameItem:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.contextmenu,n=t.path,r=t.key_path,a=this.menuOptions.isFolder,o=/([^/]+)\/?$/.exec(n)[1],!r){e.next=9;break}return e.next=6,this.verifyKey(n,"Rename");case 6:if(i=e.sent,i){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.$modal.prompt({title:"Rename ".concat(a?"Folder":"File"),body:"Renaming ".concat(n,"<br>Please provide a name:"),default:o});case 11:if(s=e.sent,s){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,z.rename(n,s);case 16:this.refresh();case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),encryptFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.contextmenu.path,e.next=3,this.$modal.prompt({title:"Lock Folder",body:"Encrypting ".concat(t,"<br>Please provide a key:"),okTitle:"continue",password:!0});case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.$modal.prompt({title:"Lock Folder",body:"Encrypting ".concat(t,"<br>Please verify your key:"),okTitle:"continue",password:!0});case 8:if(r=e.sent,r){e.next=11;break}return e.abrupt("return");case 11:if(n===r){e.next=14;break}return this.$modal.alert({title:"Encryption Cancelled",body:"The keys you provided did not match"}),e.abrupt("return");case 14:return e.next=16,this.$modal.confirm({title:"Confirm Encryption",body:"Are you sure you want to continue?<br><br><b>NOTE:</b> If you lose your key, you will be unable to recover the files in this folder.",okTitle:"encrypt",okClass:"danger"});case 16:if(a=e.sent,a){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,z.encrypt(t,n);case 21:z.keys.add(t,n),this.refresh();case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),decryptFolder:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.contextmenu.path,e.next=3,this.$modal.prompt({title:"Decrypt Folder",body:"Decrypting ".concat(t,"<br>Please enter the key:"),password:!0});case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,z.decrypt(t,n);case 8:z.keys.remove(t),this.refresh();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showContextMenu:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.contextmenu.show=!0,this.contextmenu.path=t.path,this.contextmenu.locked=t.locked,this.contextmenu.encrypted=t.encrypted,this.contextmenu.key_path=t.key_path,this.contextmenu.component=t.component,e.next=8,this.$nextTick();case 8:n=this.$refs.contextmenu,r=t.event,a=r.pageX,o=r.pageY,i=Math.min(o+3,innerHeight-n.clientHeight-10),s=Math.min(a+3,innerWidth-n.clientWidth-10),this.contextmenu.top=i+"px",this.contextmenu.left=s+"px";case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideContextMenu:function(){this.contextmenu.show=!1,this.contextmenu.path="",this.contextmenu.locked=!1,this.contextmenu.encrypted=!1,this.contextmenu.key_path=null,this.contextmenu.component=null}}},Ke=He,Be=(n("0117"),Object(u["a"])(Ke,b,y,!1,null,null,null)),Ve=Be.exports,We={components:{FileExplorer:Ve},data:function(){return{showMore:!1}},computed:Object(v["c"])(["authEnabled","token","name","extensions"])},Je=We,Xe=(n("21bb"),Object(u["a"])(Je,h,m,!1,null,null,null)),Ge=Xe.exports;r["a"].use(d["a"]);var Ye=new d["a"]({mode:"history",base:"/",routes:[{path:"/*",name:"home",component:Ge}]});Ye.beforeEach((function(e,t,n){var r=e.path.replace(/\/\/+/g,"/");"/"!==r.slice(-1)&&(r+="/"),r!==e.path&&n({path:r,replace:!0}),n()}));var Qe=Ye,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showing?n("div",{staticClass:"modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"p-4"},[e.options.title?n("h2",[e._v(e._s(e.options.title))]):e._e(),e.options.body?n("p",{domProps:{innerHTML:e._s(e.options.body)}}):e._e(),n("div",{staticClass:"mt-2"},["prompt"===e.options.type?["checkbox"===(e.options.password?"password":"text")?n("input",{directives:[{name:"model",rawName:"v-model",value:e.input1,expression:"input1"}],ref:"prompt",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.input1)?e._i(e.input1,null)>-1:e.input1},on:{change:function(t){var n=e.input1,r=t.target,a=!!r.checked;if(Array.isArray(n)){var o=null,i=e._i(n,o);r.checked?i<0&&(e.input1=n.concat([o])):i>-1&&(e.input1=n.slice(0,i).concat(n.slice(i+1)))}else e.input1=a}}}):"radio"===(e.options.password?"password":"text")?n("input",{directives:[{name:"model",rawName:"v-model",value:e.input1,expression:"input1"}],ref:"prompt",attrs:{type:"radio"},domProps:{checked:e._q(e.input1,null)},on:{change:function(t){e.input1=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.input1,expression:"input1"}],ref:"prompt",attrs:{type:e.options.password?"password":"text"},domProps:{value:e.input1},on:{input:function(t){t.target.composing||(e.input1=t.target.value)}}})]:"login"===e.options.type?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.input1,expression:"input1"}],ref:"login",class:{"border-red-500":e.error},attrs:{placeholder:"username",type:"text"},domProps:{value:e.input1},on:{input:function(t){t.target.composing||(e.input1=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input2,expression:"input2"}],class:{"border-red-500":e.error},attrs:{placeholder:"password",type:"password"},domProps:{value:e.input2},on:{input:function(t){t.target.composing||(e.input2=t.target.value)}}}),e.error?n("p",{staticClass:"text-red-500"},[e._v("\n            incorrect login or password\n          ")]):e._e(),e._m(0),e._m(1)]:e._e()],2)]),n("div",{staticClass:"modal-actions"},["alert"!==e.options.type?n("button",{staticClass:"btn",class:e.options.cancelClass,on:{click:e.cancel}},[e._v("\n        "+e._s(e.options.cancelTitle)+"\n      ")]):e._e(),n("button",{staticClass:"btn",class:e.options.okClass,attrs:{disabled:e.okDisabled},on:{click:e.ok}},[e._v("\n        "+e._s(e.options.okTitle)+"\n      ")])])])]):e._e()},et=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{staticClass:"link text-blue-500",attrs:{href:"https://home.nanome.ai/login/forgot",target:"_blank"}},[e._v("\n              forgot password?\n            ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-xs text-gray-700"},[e._v("\n            Don't have a Nanome account?\n            "),n("a",{staticClass:"link text-blue-500",attrs:{href:"https://home.nanome.ai/register",target:"_blank"}},[e._v("\n              Register here\n            ")])])}];function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){Object(me["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt={type:"confirm",title:"",body:"",default:"",okTitle:"ok",okClass:"primary",cancelTitle:"cancel",cancelClass:"",password:!1},at=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},ot={data:function(){return{showing:!1,error:!1,loading:!1,options:nt({},rt),input1:"",input2:"",deferred:at()}},computed:{okDisabled:function(){return!!this.loading||("login"===this.options.type?!this.input1||!this.input2:"prompt"===this.options.type&&!this.input1)}},mounted:function(){document.body.addEventListener("keydown",this.onKeydown)},destroyed:function(){document.body.removeEventListener("keydown",this.onKeydown)},methods:{onKeydown:function(e){this.showing&&("Enter"===e.key?this.ok():"Escape"===e.key&&this.cancel())},show:function(e){var t=this;return Object.assign(this.options,rt,e),this.showing=!0,"prompt"===this.options.type?(this.input1=this.options.default,this.$nextTick((function(){var e=t.$refs.prompt;e.focus(),e.setSelectionRange(0,e.value.lastIndexOf("."))}))):"login"===this.options.type&&this.$nextTick((function(){return t.$refs.login.focus()})),this.deferred=at(),this.deferred},alert:function(e){return this.show(nt({type:"alert",okClass:""},e))},confirm:function(e){return this.show(nt({type:"confirm"},e))},prompt:function(e){return this.show(nt({type:"prompt"},e))},login:function(e){return this.show(nt({type:"login",title:"Log in to Nanome",body:"Log in using your Nanome account",okTitle:"log in",okClass:"primary",cancelClass:""},e))},reset:function(){this.showing=!1,this.input1="",this.input2="",this.deferred=null},cancel:function(){"confirm"===this.options.type?this.deferred.resolve(!1):this.deferred.resolve(void 0),this.reset()},ok:function(){if(!this.okDisabled){var e;if("confirm"===this.options.type)e=!0;else if("prompt"===this.options.type)e=this.input1;else if("login"===this.options.type)return void this.attemptLogin();this.deferred.resolve(e),this.reset()}},attemptLogin:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.error=!1,this.loading=!0,t={username:this.input1,password:this.input2},e.next=5,this.$store.dispatch("login",t);case 5:n=e.sent,this.loading=!1,n?(this.deferred.resolve(!0),this.reset()):this.error=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},it=ot,st=(n("30db"),Object(u["a"])(it,Ze,et,!1,null,null,null)),ct=st.exports;r["a"].config.productionTip=!1,r["a"].directive("click-out",{bind:function(e,t){e.data={stop:function(e){return e.stopPropagation()},event:function(){return t.value()},esc:function(t){return"Escape"===t.key&&e.data.event()}},setTimeout((function(){document.body.addEventListener("click",e.data.event),document.body.addEventListener("keydown",e.data.esc),e.addEventListener("click",e.data.stop)}),0)},unbind:function(e){document.body.removeEventListener("click",e.data.event),document.body.removeEventListener("keydown",e.data.esc),e.removeEventListener("click",e.data.stop)}}),r["a"].filter("extensions",(function(e){return e?e.map((function(e){return"."+e})).join(", "):""})),E.dispatch("getInfo"),E.dispatch("refresh");var ut=new r["a"]({router:Qe,store:E,render:function(e){return e(f)}}).$mount("#app"),lt=r["a"].extend(ct),pt=new lt({store:E});pt.$mount(),r["a"].prototype.$modal=pt,ut.$root.$el.appendChild(pt.$el)},"5c0b":function(e,t,n){"use strict";var r=n("e332"),a=n.n(r);a.a},"7a98":function(e,t,n){},"7bf6":function(e,t,n){"use strict";var r=n("5258"),a=n.n(r);a.a},"7fe2":function(e,t,n){},"812f":function(e,t,n){},af21:function(e,t,n){},b751:function(e,t,n){"use strict";var r=n("7fe2"),a=n.n(r);a.a},caf9:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.4d600d0e.png"},def6:function(e,t,n){},e332:function(e,t,n){},e7ab:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},fe45:function(e,t,n){}});